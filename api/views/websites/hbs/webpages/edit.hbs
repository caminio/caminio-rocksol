<section class="main-wrapper">

  <header>
    <div class="box title-box websites">
      <div class="main-ctrl">

        <div class="btn-toolbar">

          <div class="btn-group">
            <button class="btn transparent borderless icon-text" {{action 'cancelEdit' webpage}}>
              <i class="fa fa-arrow-left"></i>
              {{t 'back'}}
            </button>
          </div>

          <div class="dropdown btn-group">
            <button class="btn borderless transparent text-icon dropdown-toggle" data-toggle="dropdown">
              {{t 'webpage.layout'}}:
              <strong>{{webpage.layout}}</strong>
              <i class="fa fa-angle-down"></i>
            </button>
            <ul class="dropdown-menu pull-right">
              {{#each layout in availableLayouts}}
                <li {{action 'changeLayout' layout}}><a href="#">{{layout}}</a></li>
              {{/each}}
            </ul>
          </div>
          {{#if translation.hasMultiLang}}
            <div class="dropdown btn-group">
              <button class="btn text-icon borderless transparent dropdown-toggle" data-toggle="dropdown">
                {{t 'translation.title'}}:
                <strong>{{translation.locale}}</strong>
                <i class="fa fa-angle-down"></i>
              </button>
              <ul class="dropdown-menu pull-right">
                {{#each lang in translation.availableLangs}}
                  <li {{action 'changeLang' lang}}><a href="#">{{lang}}</a></li>
                {{/each}}
              </ul>
            </div>
          {{/if}}

          <div class="btn-group">
            <button {{bind-attr class=":btn translation.isDirty:primary"}}
                    {{action 'saveTranslation'}}>
              {{t 'save'}}
            </button>
          </div>

          <div class="dropdown dropdown-hover as-btn">
            <button class="btn transparent borderless icon-only"><i class="fa fa-bars"></i></button>
            <ul class="dropdown-menu pull-right">
              <li>
              <a href="#" class="highlight-danger"
                {{action 'remove' content}}>
                {{t 'delete'}}
              </a>
              </li>
              <li>
              <a target="_blank"
                {{bind-attr href='webpage.previewUrl'}}>
                {{t 'preview'}}
              </a>
              </li>
            </ul>
          </div>

        </div>
      </div>

      <h1>
        {{translation.title}} <small class="desc">({{webpage.filename}})<small>
      </h1>

    </div>

  </header>

  <div class="pebbles-list">
    <ul>
      <li>{{translation.title}}</li>
      {{#each webpage.pebbles}}
      <li>{{name}}</li>
      {{/each}}
    </ul>
  </div>

  <div id="main-editor-wrap" class="features box fill-box default-padding">

    <section id="editor" class="editor">
      <div class="outer">
        <section class="entry-markdown">
          <header class="floatingheader">
            <div class="btn-toolbar">
              <div class="btn-group">
                <button class="btn" {{action replaceText 'heading'}}
                                    {{translateAttr title='editor.heading'}}>
                  <i class="fa fa-text-height"></i>
                </button>
              </div>
              <div class="btn-group">
                <button class="btn" {{action replaceText 'bold'}}
                                    {{translateAttr title='editor.bold'}}>
                  <i class="fa fa-bold"></i>
                </button>
                <button class="btn" {{action replaceText 'italic'}}
                                    {{translateAttr title='editor.italic'}}>
                  <i class="fa fa-italic"></i>
                </button>
                <button class="btn" {{action replaceText 'underline'}}
                                    {{translateAttr title='editor.underline'}}>
                  <i class="fa fa-underline"></i>
                </button>
              </div>
              <div class="btn-group">
                <button class="btn" {{action openMediaLibrary webpage}}
                                    {{translateAttr title='editor.image'}}>
                  <i class="fa fa-picture-o"></i>
                </button>
                <button class="btn" {{action openPebblesLibrary webpage}}
                                    {{translateAttr title='editor.pebbles'}}>
                  <i class="fa fa-th"></i>
                </button>
                <button class="btn" {{action openLinkLibrary}}
                                    {{translateAttr title='editor.link'}}>
                  <i class="fa fa-chain"></i>
                </button>
              </div>
            </div>
          </header>
          
          <section class="entry-markdown-content">
            <textarea class="input-area" id="editor-input-content">content cannot be loaded</textarea>
          </section>
        </section>
        <section class="entry-preview active">
          <header class="floatingheader">
            {{t 'preview'}}<span class="entry-word-count">0</span>
          </header>
          <iframe class="rocksol-preview" id="rocksol-preview" {{bind-attr data-url=webpage.previewUrl}}></iframe>
        </section>
      </div>
    </section>

  </div>


</section>

<div id='media-library' class='modal fade'>
  <div class="modal-dialog" style="width: 80%">
    {{media-manager item=webpage asDialog=true}}
  </div><!-- /.modal-dialog -->
</div>

{{pebbles-library pebbles=pebbles webpage=webpage pebbles=pebbles curTranslation=translation}}
